<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xhu.dao.RecruitDao">
    <!-- 分页查询 -->
    <select id="list" resultType="com.xhu.entity.Recruit">
        SELECT *
        FROM recruit
        WHERE 1 = 1
        <if test="recruit.recruitType != null">
            AND  recruit_type = #{recruit.recruitType}
        </if>
        <if test="recruit.companyId != null">
            AND  company_id = #{recruit.companyId}
        </if>
        <if test="recruit.companyId == null">
            AND  #{recruit.time} BETWEEN  create_time AND end_time
        </if>
        ORDER BY create_time DESC
        <if test=" index != null and size != null">
            limit #{index},#{size}
        </if>
    </select>

    <!-- 查询记录总数 -->
    <select id="getCount" resultType="int" parameterType="com.xhu.entity.Recruit">
        SELECT count(1)
        FROM recruit
        WHERE 1 = 1
        <if test="recruitType != null">
            AND  recruit_type = #{recruitType}
        </if>
        <if test="companyId != null">
            AND  company_id = #{companyId}
        </if>
        <if test="companyId == null">
            AND  #{time} BETWEEN  create_time AND end_time
        </if>
    </select>

    <!-- 根据Recruit id查询 -->
    <select id="queryById" resultType="com.xhu.entity.Recruit">
        SELECT *
        FROM recruit
        WHERE recruit_id = #{recruitId}
    </select>

    <insert id="add" parameterType="com.xhu.entity.Recruit">
        INSERT INTO recruit(recruit_id,recruit_number,recruit_type,recruit_remark,company_id,create_time,end_time)
        VALUES (#{recruitId},#{recruitNumber},#{recruitType},#{recruitRemark},#{companyId},#{createTime},#{endTime})
    </insert>

    <delete id="deleteById">
        DELETE FROM
        recruit
        WHERE
        recruit_id = #{recruitId}
    </delete>

</mapper>